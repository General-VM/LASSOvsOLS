---
title: "LASSO vs OLS"
author: "Victor Matyiku, Rebecca Ly"
date: "2025-03-06"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Code

## Generating data

```{r}
p <- 10
n <- 100

beta_0 <- rnorm(1)
coefs <- matrix(rnorm(p), nrow = p, ncol = 1)

predictors <- matrix(
  rnorm(n*p), nrow = n, ncol = p,
  dimnames = list(rows = 1:n, cols = paste("X", 1:p, sep=""))
)

errors <- rnorm(100)
observations <- data.frame(Y = beta_0 + predictors %*% coefs + errors)

generated_data <- as.data.frame(
  cbind(observations, predictors)
)
head(generated_data)
```

## OLS

```{r}
ols_model <- lm(Y ~ ., generated_data)
significant_coefs <- data.frame(Value = summary(ols_model)$coef[summary(ols_model)$coef[,4] <= .05, 4])
significant_coefs
```

```{r}
if (is.na(significant_coefs["(Intercept)",])) {
  ols_beta_0 <- 0
  ols_coefs <- significant_coefs
} else {
  ols_beta_0 <- significant_coefs["(Intercept)",]
}

ols_coefs <- significant_coefs[row.names(significant_coefs) != "(Intercept)", , drop = FALSE]
ols_coefs
```

```{r}
res <- data.frame(Residuals = observations$Y - ols_beta_0 - predictors[, row.names(ols_coefs)] %*% ols_coefs$Value)
sq_error <- (norm(as.matrix(res, ncol=1), "e"))^2
sq_error
```

```{r}
q <- length(ols_coefs$Value)
q
```